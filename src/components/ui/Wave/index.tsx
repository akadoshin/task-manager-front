import { useMemo } from "react";
import { motion } from "framer-motion";

import "./wave.css";

export default function Wave({
  children,
}: Readonly<{ children: React.ReactNode }>) {
  const wave0 = useMemo(() => {
    const wave = [
      "M0,160L40,144C80,128,160,96,240,80C320,64,400,64,480,96C560,128,640,192,720,208C800,224,880,192,960,170.7C1040,149,1120,139,1200,133.3C1280,128,1360,128,1400,128L1440,128L1440,0L1400,0C1360,0,1280,0,1200,0C1120,0,1040,0,960,0C880,0,800,0,720,0C640,0,560,0,480,0C400,0,320,0,240,0C160,0,80,0,40,0L0,0Z",
      "M0,128L40,128C80,128,160,128,240,144C320,160,400,192,480,218.7C560,245,640,267,720,261.3C800,256,880,224,960,229.3C1040,235,1120,277,1200,261.3C1280,245,1360,171,1400,133.3L1440,96L1440,0L1400,0C1360,0,1280,0,1200,0C1120,0,1040,0,960,0C880,0,800,0,720,0C640,0,560,0,480,0C400,0,320,0,240,0C160,0,80,0,40,0L0,0Z",
      "M0,192L40,176C80,160,160,128,240,106.7C320,85,400,75,480,80C560,85,640,107,720,149.3C800,192,880,256,960,272C1040,288,1120,256,1200,234.7C1280,213,1360,203,1400,197.3L1440,192L1440,0L1400,0C1360,0,1280,0,1200,0C1120,0,1040,0,960,0C880,0,800,0,720,0C640,0,560,0,480,0C400,0,320,0,240,0C160,0,80,0,40,0L0,0Z",
    ].sort(() => Math.random() - 0.5);
    return [...wave, wave[0]];
  }, []);

  const wave1 = useMemo(() => {
    const wave = [
      "M0,64L40,69.3C80,75,160,85,240,96C320,107,400,117,480,106.7C560,96,640,64,720,58.7C800,53,880,75,960,96C1040,117,1120,139,1200,144C1280,149,1360,139,1400,133.3L1440,128L1440,0L1400,0C1360,0,1280,0,1200,0C1120,0,1040,0,960,0C880,0,800,0,720,0C640,0,560,0,480,0C400,0,320,0,240,0C160,0,80,0,40,0L0,0Z",
      "M0,288L40,256C80,224,160,160,240,149.3C320,139,400,181,480,208C560,235,640,245,720,229.3C800,213,880,171,960,165.3C1040,160,1120,192,1200,176C1280,160,1360,96,1400,64L1440,32L1440,0L1400,0C1360,0,1280,0,1200,0C1120,0,1040,0,960,0C880,0,800,0,720,0C640,0,560,0,480,0C400,0,320,0,240,0C160,0,80,0,40,0L0,0Z",
      "M0,128L40,138.7C80,149,160,171,240,176C320,181,400,171,480,154.7C560,139,640,117,720,96C800,75,880,53,960,53.3C1040,53,1120,75,1200,122.7C1280,171,1360,245,1400,282.7L1440,320L1440,0L1400,0C1360,0,1280,0,1200,0C1120,0,1040,0,960,0C880,0,800,0,720,0C640,0,560,0,480,0C400,0,320,0,240,0C160,0,80,0,40,0L0,0Z",
    ].sort(() => Math.random() - 0.5);
    return [...wave, wave[0]];
  }, []);

  return (
    <section>
      <div className="wave">{children}</div>
      <motion.svg
        width="100%"
        height="100%"
        className="wave-svg"
        viewBox="0 0 1440 390"
        xmlns="http://www.w3.org/2000/svg"
      >
        <motion.path
          stroke="none"
          strokeWidth="0"
          className="path-0"
          d={wave0[0]}
          animate={{
            d: wave0,
          }}
          transition={{ duration: 16, repeat: Infinity, ease: "linear" }}
        />
        <motion.path
          stroke="none"
          strokeWidth="0"
          className="path-1"
          d={wave1[0]}
          animate={{
            d: wave1,
          }}
          transition={{ duration: 32, repeat: Infinity, ease: "linear" }}
        />
      </motion.svg>
    </section>
  );
}
